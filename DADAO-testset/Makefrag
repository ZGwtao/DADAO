#
# Makefile for tests
#

DIR_TESTS_SOURCE		:= $(DIR_DADAO_TOP)/DADAO-testset
DIR_TESTS_TARGET		:= $(DIR_DADAO_TARGET)

TESTS_SIMPLE_SOURCE			:= $(DIR_TESTS_SOURCE)/simple
TESTS_SIMPLE_TARGET			:= $(DIR_TESTS_TARGET)/simple

include DADAO-testset/Makefrag-llvm-testsuite

include DADAO-testset/Makefrag-simple-multi-arch

tests-simple-llvm-highfive:
	#
	# TARGET DIR: $(TESTS_SIMPLE_TARGET)
	#
	@rm -fr $(TESTS_SIMPLE_TARGET)
	@mkdir -p $(TESTS_SIMPLE_TARGET)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(RUNTIME_COMMON_MK)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(TESTS_SIMPLE_SOURCE)/*
	@echo "DIR_DADAO_TOP\t\t\t:= $(DIR_DADAO_TOP)"				>  $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include common.mk"									>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-llvm"								>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-run"								>> $(TESTS_SIMPLE_TARGET)/Makefile
	@$(DADAO_MAKE) -C $(TESTS_SIMPLE_TARGET)

tests-simple-gcc-elf-highfive:
	#
	# TARGET DIR: $(TESTS_SIMPLE_TARGET)
	#
	@rm -fr $(TESTS_SIMPLE_TARGET)
	@mkdir -p $(TESTS_SIMPLE_TARGET)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(RUNTIME_COMMON_MK)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(TESTS_SIMPLE_SOURCE)/*
	@echo "DIR_DADAO_TOP\t\t\t:= $(DIR_DADAO_TOP)"				>  $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include common.mk"									>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-gcc-elf"							>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-run"								>> $(TESTS_SIMPLE_TARGET)/Makefile
	@$(DADAO_MAKE) -C $(TESTS_SIMPLE_TARGET)

tests-simple-gcc-gnu-highfive:
	#
	# TARGET DIR: $(TESTS_SIMPLE_TARGET)
	#
	@rm -fr $(TESTS_SIMPLE_TARGET)
	@mkdir -p $(TESTS_SIMPLE_TARGET)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(RUNTIME_COMMON_MK)
	@ln -s -t $(TESTS_SIMPLE_TARGET) $(TESTS_SIMPLE_SOURCE)/*
	@echo "DIR_DADAO_TOP\t\t\t:= $(DIR_DADAO_TOP)"				>  $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include common.mk"									>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-gcc-gnu"							>> $(TESTS_SIMPLE_TARGET)/Makefile
	@echo "include Makefrag-run"								>> $(TESTS_SIMPLE_TARGET)/Makefile
	@$(DADAO_MAKE) -C $(TESTS_SIMPLE_TARGET)

