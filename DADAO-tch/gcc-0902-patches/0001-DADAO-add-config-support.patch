From b16f31f13468c3410dc3575cd6dc42a657c61249 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@pku.edu.cn>
Date: Wed, 13 Nov 2019 20:15:23 +0800
Subject: [PATCH] DADAO: add config support

Signed-off-by: Guan Xuetao <gxt@pku.edu.cn>

DADAO: add port for addao

Signed-off-by: shiyining <1700012728@pku.edu.cn>
---
 config.sub     |  5 +++++
 configure      |  3 +++
 configure.ac   |  3 +++
 gcc/config.gcc | 10 ++++++++++
 4 files changed, 21 insertions(+)

diff --git a/config.sub b/config.sub
index 75bb6a3135b..e38237c0402 100755
--- a/config.sub
+++ b/config.sub
@@ -293,6 +293,10 @@ case $1 in
 				basic_machine=mips-dec
 				os=
 				;;
+			dadao)
+				basic_machine=dadao-unknown
+				os=dadao
+				;;
 			delta88)
 				basic_machine=m88k-motorola
 				os=sysv3
@@ -1174,6 +1178,7 @@ case $cpu-$vendor in
 			| c[123]* | c30 | [cjt]90 | c4x \
 			| c8051 | clipper | craynv | csky | cydra \
 			| d10v | d30v | dlx | dsp16xx \
+			| dadao | dadao32 | dadao64 \
 			| e2k | elxsi | epiphany \
 			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
 			| h8300 | h8500 \
diff --git a/configure b/configure
index abd93a990a9..ce546dd60bc 100755
--- a/configure
+++ b/configure
@@ -3747,6 +3747,9 @@ case "${target}" in
   d30v-*-*)
     noconfigdirs="$noconfigdirs gdb"
     ;;
+  dadao-*-*)
+    noconfigdirs="$noconfigdirs"
+    ;;
   fr30-*-elf*)
     noconfigdirs="$noconfigdirs gdb"
     ;;
diff --git a/configure.ac b/configure.ac
index 9db4fd14aa2..ac03d55a047 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1029,6 +1029,9 @@ case "${target}" in
   d30v-*-*)
     noconfigdirs="$noconfigdirs gdb"
     ;;
+  dadao-*-*)
+    noconfigdirs="$noconfigdirs"
+    ;;
   fr30-*-elf*)
     noconfigdirs="$noconfigdirs gdb"
     ;;
diff --git a/gcc/config.gcc b/gcc/config.gcc
index ddd3b8f4d9d..97ea2f0b5f3 100644
--- a/gcc/config.gcc
+++ b/gcc/config.gcc
@@ -363,6 +363,10 @@ bfin*-*)
 crisv32-*)
 	cpu_type=cris
 	;;
+dadao*)
+	cpu_type=dadao
+	target_has_targetm_common=no
+	;;
 frv*)	cpu_type=frv
 	extra_options="${extra_options} g.opt"
 	;;
@@ -1377,6 +1381,12 @@ csky-*-*)
 		;;
 	esac
 	;;
+dadao-*-elf)
+	gas=yes
+	gnu_ld=yes
+	tmake_file="${tmake_file} dadao/t-dadao"
+	tm_file="dbxelf.h elfos.h newlib-stdint.h ${tm_file}"
+	;;
 epiphany-*-elf | epiphany-*-rtems*)
 	tm_file="${tm_file} dbxelf.h elfos.h"
 	tmake_file="${tmake_file} epiphany/t-epiphany"
-- 
2.17.1

